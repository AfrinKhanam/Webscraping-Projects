#activating conda enviorment
conda activate <enviorment_name>

systemctl status rabbitmq-server.service

# Creating rabbitmq user and password
sudo rabbitmqctl add_user webscrape webscrape

#list user 
sudo rabbitmqctl list_users

#Virtual Host
sudo rabbitmqctl add_vhost webscrape

#List Virtual Host
sudo rabbitmqctl list_vhosts

#Set permissions
sudo rabbitmqctl set_permissions -p webscrape webscrape ".*" ".*" ".*"


# Linking RabbitMq client code to individual module
cd <module>/building_blocks/
ln -s ../../Utils/MessageQueue/ MessageQueue


#elastic search check status
systemctl status elasticsearch.service 

#elastic search start
systemctl start elasticsearch.service


#postgres commands
1)connect to database - 
\connect DBNAME
2)psql -U username mydatabase 
3)

delete from public."LeadGenerationInfos"
where "QueriedOn" < now() - interval '2 days'





sudo -u postgres psql

DELETE from public."ChatLogs" t1
 WHERE t1."ConversationId" NOT IN (select "ConversationId" from  public."UserInfos") 


SELECT * from public."ChatLogs" t1
 WHERE t1."ConversationId" NOT IN (select "ConversationId" from  public."UserInfos")

select * from public."ChatLogs" t1
 inner join public."UserInfos" as t2
 on (t2."ConversationId" = t1."ConversationId")

 #command to take database backup
 pg_dump --dbname=UjjivanBankDb --username=postgres -h localhost --format=p  --file=/home/ubuntuvm/backup.sql

#pm2 to restart periodically every 5 minutes
pm2 start elastic.py --name delete --cron "*/5 * * * *" --no-autorestart
pm2 start main.py --name auto_scrape_at_12am  --cron "0 0 * * *" --no-autorestart 

#fetch specific branch data
git clone --single-branch --branch <branchname> <remote-repo>











